[Home](../index.md) > DevOps > [Docker](./docker.md)

# DevOps | Docker

## Basic Commands

List Containers / Images.

```text
# List all Containers.
docker ps -a

# List all Images.
docker images -a
docker image ls
```

Working with Images.

```text
# Search for Image.
docker search <image>
docker search -f is-official=true <image>

# Pull Image from DockerHub.
docker pull <image[:tag|@digest]>

# View Image info.
docker inspect <image>
docker history <image>

# Remove Image.
docker rmi <image>
docker image remove <image>
```

Create Containers.

```text
# Just create.
docker create -it <image>

# Create, start and attach.
docker run -it <image>

# Create, start and detach immediately.
docker run -itd <image>

# Create with name, start, attach and remove after detachment.
docker run -it --rm --name <container> <image>
```

Start / Unpause Containers.

```text
# Start in the background.
docker start <container>
docker restart <container>

# Start and attach.
docker start -ia <container>

# Unpause Container.
docker unpause <container>
```

Stop / Pause / Restart Containers.

```text
# Gracefully stop running Container.
docker stop <container>

# Forcefully stop unresponsive Container.
docker kill <container>

# Put Container on hold.
docker pause <container>

# Restart Container.
docker restart <container>

# Stop all running Containers (Unix, Linux ... etc).
docker stop $(docker ps -q)

# Stop all running Containers (Win CMD).
for /f "tokens=*" %i in ('docker ps -q') do docker stop %i
```

Delete Containers.

```text
# Remove Container that is not running.
docker rm <container>
docker remove <container>

# Force stop and remove.
docker remove -f <container>
```

Attach Containers.

```text
# Just attach.
docker attach <container>

# Attach and execute shell (bash as ex.) on running Container.
docker exec -it <container> bash
```

Check where the hell are you at and what's going on.

```text
# Current user
whoami

# Info about OS (Linux, Unix ... etc.)
cat /etc/issue

# Info about System (Win CMD)
systeminfo

# Info about docker runtime.
docker info

# View running processes of a Container.
docker top <container>

# View Container logs with time.
docker logs -t <container>
```

## Docker File

Docker file basics.

```text
FROM <image>

USER <user>

RUN <command>

WORKDIR <path>

COPY [--chown=<user>:<group>|--from=<stage>] <host/stage_path> <container_path>

EXPOSE <ports>

CMD ["cmd 1", "cmd 2", ...]
```

### Commands

```text
# Build Image from dockerfile.
docker build -t <image> .

# Runs new container with exposed port to host.
docker run -dit -p <host_port>:<container_port> <image>

# Runs new container with exposed port to host and removes it after stop.
docker run -it -p <host_port>:<container_port> --name <container> --rm <image>

# Runs new container and expose all ports (see EXPOSE in docker file).
docker run -dit -P --name <container> <image>
```

## Mounts

**Mount types:**

- Bind Mounts
- Volumes

### Bind Mounts

Allows to mount physical folders/files from host to container.

```text
# Runs container with mounted folder from the host. Removes container after stop.
docker run -it -p <host_port>:<container_port> --mount type=bind,source=<host_folder_path>,target=<container_folder_path>  --name <container> --rm <image>
```

### Volumes

Mechanism for persisting data generated by and used by containers. Completely managed by Docker. Doesn't depend on the directory structure and OS of the host.

```
# Runs container with mounted volume. Removes container after stop.
docker run -it -p <host_port>:<container_port> --mount type=volume,src=<volume>,target=<container_folder_path> --name <container> --rm <image>
```
